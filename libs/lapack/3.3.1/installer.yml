---
:src: lapack-3.3.1.tgz
:type: libs
:version: 3.3.1
:compilers:
  gcc:
:patches:
  - lapack-alces.patch
:compile: |
  cp INSTALL/make.inc.gfortran make.inc
  make blaslib lapacklib tmglib variants <%= redirect(:make) %>
:install: |
  install -D -m 644 lapack_LINUX_ALCES.a <%= dest_dir %>/liblapack.a
  install -D -m 644 tmglib_LINUX_ALCES.a <%= dest_dir %>/libtmglib.a
  install -D -m 644 blas_LINUX_ALCES.a <%= dest_dir %>/libblas.a
  install -m 644 README LICENSE -t <%= dest_dir %>
  install -d <%= dest_dir %>/variants
  install -m 644 SRC/VARIANTS/LIB/* -t <%= dest_dir %>/variants
  install -m 644 SRC/VARIANTS/README <%= dest_dir %>/variants/README
:module: |
  #%Module1.0#####################################################################
  ##
  ## lapack module file
  ##
  ################################################################################
  proc ModulesHelp { } {
          global version
  
          puts stderr "\tAdds `Lapack-$version' to your PATH environment variable and necessary libraries"
  }
  
  set     version <%= version %>
  
  module-whatis   "loads the necessary `lapack-$version' library paths"
  
  set LAPACK_DIR <%= dest_dir %>
  
  setenv           LAPACKDIR        $LAPACK_DIR
  setenv           LAPACK_DIR       $LAPACK_DIR
  setenv           LAPACK           $LAPACK_DIR/liblapack.a
  
  prepend-path LD_LIBRARY_PATH $LAPACK_DIR
  prepend-path --delim " " LDFLAGS " -L$LAPACK_DIR"
