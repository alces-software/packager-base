---
:src: fftw-2.1.5.tar.gz
:src_dir: fftw-2.1.5
:type: libs
:version: 2.1.5
:compilers:
  gcc:
    :configure_prefix: ''
  intel:
    :configure_prefix: "CC='icc -i-dynamic' CXX='icpc -i-dynamic' FC='ifort -i-dynamic' F90='' && "
:variants:
  float:
    :configure_flags: '--enable-float'
  double:
    :configure_flags: ''
  float-mpi:
    :configure_flags: '--enable-float --enable-mpi'
  double-mpi:
    :configure_flags: '--enable-mpi'
:compile: |
  <%= compiler[:configure_prefix] %> ./configure \
    --prefix=<%= dest_dir %> \
    --enable-shared <%= variant[:configure_flags] %> <%= redirect(:configure) %>
  make <%= redirect(:make) %>
:install: |
  make install <%= redirect(:install) %>
:module: |
  #%Module1.0#####################################################################
  ##
  ## fftw2 module file
  ##
  ################################################################################
  proc ModulesHelp { } {
          global version

          puts stderr "\tAdds `fftw-$version' to your PATH environment variable and necessary libraries"
  }

  <%= "prereq mpi/#{compiler_name}/openmpi" if variant_name =~ /-mpi$/ %>

  set     version <%= version %>

  module-whatis   "loads the necessary `fftw-$version' library paths"

  set FFTW_DIR <%= dest_dir %>

  setenv           FFTWDIR          $FFTW_DIR/lib
  setenv           FFTW             $FFTW_DIR
  setenv           FFTWINCLUDE      $FFTW_DIR/include
  setenv           FFTWLIB          fftw

  prepend-path LD_LIBRARY_PATH $FFTW_DIR/lib/
  prepend-path MANPATH $FFTW_DIR/share/man/
  prepend-path C_INCLUDE_PATH $FFTW_DIR/include/
  prepend-path CPLUS_INCLUDE_PATH $FFTW_DIR/include/
  prepend-path --delim " " CPPFLAGS " -I$FFTW_DIR/include"
  prepend-path --delim " " CFLAGS " -I$FFTW_DIR/include"
  prepend-path --delim " " LDFLAGS " -L$FFTW_DIR/lib/"
