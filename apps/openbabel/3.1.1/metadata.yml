---
:schema: 1
:license: GPL
:summary: A chemical toolbox designed to speak the many languages of chemical data
:url: http://openbabel.org/
:description: |
  Open Babel is a chemical toolbox designed to speak the many
  languages of chemical data. Itâ€™s an open, collaborative project
  allowing anyone to search, convert, analyze, or store data from
  molecular modeling, chemistry, solid-state materials, biochemistry,
  or related areas.
:group: Chemistry
:changelog: |
  * Wed Mar 31 2021 - Rob Brown <rob.brown@alces-flight.com>
    - Add python37 variant to allow builds against python3
  * Tue Mar 30 2021 - Rob Brown <rob.brown@alces-flight.com>
    - Add dependency on python to allow python bindings to be built
  * Wed May 27 2020 - Rob Brown <rob.brown@alces-flight.com>
    - Update to latest v3.1.1; bump eigen3 dependency
  * Thu Feb 20 2018 - Mark J. Titorenko <mark.titorenko@alces-software.com>
    - Update to latest v2.4.1
  * Fri Sep  7 2012 - Mark J. Titorenko <mark.titorenko@alces-software.com>
    - Use EIGENINCLUDE rather than EIGEN2INCLUDE
  * Thu Sep  6 2012 - Mark J. Titorenko <mark.titorenko@alces-software.com>
    - Refactored to packager style
  * Tue Jun 19 2012 - Mark J. Titorenko <mark.titorenko@alces-software.com>
    - First created
:dependencies:
  :build:
    el:
      - wxGTK-devel
      - libxml2-devel
      - zlib-devel
      - cairo-devel
      - perl-devel
  :runtime:
    el:
      - wxGTK
      - zlib
      - cairo
      - libxml2
      - perl
:variants:
  default:
    :description: "Builds for Python 2.7.x series"
    :python_bin: python
    :python_libdir: python2.7
    :requirements:
      :build:
        - apps/python ~> 2.7.3
      :runtime:
        - apps/python ~> 2.7.3
  python37:
    :description: "Builds for Python 3.7.x series"
    :python_bin: python3
    :python_libdir: python3.7
    :cmake_flags: "-DPython_ADDITIONAL_VERSIONS=3.7"
    :requirements:
      :build:
        - apps/python3 ~> 3.7.0
      :runtime:
        - apps/python3 ~> 3.7.0
:requirements:
  :tool: apps/cmake
  :build: 
    - libs/eigen ~> 3.3.0
:src: openbabel-3.1.1-source.tar.bz2
:type: apps
:version: '3.1.1'
:compilers:
  gcc:
:compile: |
  mkdir build
  cd build
  cmake -DBUILD_GUI=ON \
        -DPYTHON_BINDINGS=ON \
        -DPERL_BINDINGS=ON \
        -DEIGEN3_INCLUDE_DIR=$EIGENINCLUDE \
        -DCMAKE_INSTALL_PREFIX=<%= dest_dir %> \
        <%= variant[:cmake_flags] %> \
        .. <%= redirect(:configure) %>
  make <%= redirect(:make) %>
:install: |
  cd build
  make install <%= redirect(:install) %>
:module: |
  setenv ${appcaps}DIR ${appdir}
  setenv ${appcaps}BIN ${appdir}/bin

  prepend-path LD_LIBRARY_PATH ${appdir}/lib
  prepend-path PATH ${appdir}/bin

  prepend-path PYTHONPATH ${appdir}/lib/<%= variant[:python_libdir] %>/site-packages
