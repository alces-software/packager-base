---
:schema: 1
:title: plink
:license: GPLv2
:summary: Whole genome association analysis toolkit
:url: http://pngu.mgh.harvard.edu/~purcell/plink/
:description: |
  PLINK is a free, open-source whole genome association analysis
  toolset, designed to perform a range of basic, large-scale analyses
  in a computationally efficient manner.  The focus of PLINK is purely
  on analysis of genotype/phenotype data, so there is no support for
  steps prior to this (e.g. study design and planning, generating
  genotype or CNV calls from raw data). Through integration with
  gPLINK and Haploview, there is some support for the subsequent
  visualization, annotation and storage of results.
:group: Bioinformatics
:changelog: |
  * Wed Oct 10 2012 Mark J. Titorenko <mark.titorenko@alces-software.com>
    - First created
:src: plink-1.07-src.zip
:src_dir: plink-1.07-src
:type: apps
:version: '1.07'
:compilers:
  gcc:
:compile: |
  sed -i -e 's|^FORCE_DYNAMIC.*|FORCE_DYNAMIC = 1|g' Makefile
  make <%= redirect(:make) %>
:install: |
  mkdir <%= dest_dir %>/{bin,doc,java}
  cp -v COPYING.txt README.txt <%= dest_dir %>/doc <%= redirect(:install) %>
  cp -v plink <%= dest_dir %>/bin <%= redirect(:install) %>
  cp -v gPLINK.jar <%= dest_dir %>/java <%= redirect(:install) %>
:module: |
  setenv ${appcaps}DIR ${appdir}
  setenv ${appcaps}BIN ${appdir}/bin

  set JAVA_OPTS \$${appcaps}_JAVA_OPTS

  setenv ${appcaps}_JAVA_MEM_MX 1g
  setenv ${appcaps}_JAVA_OPTS "-Xmx\$${appcaps}_JAVA_MEM_MX"

  set-alias gplink "java `eval echo \\$JAVA_OPTS` -jar ${appdir}/java/gPLINK.jar"

  prepend-path PATH ${appdir}/bin
