---
:schema: 1
:title: pyyaml
:license: MIT License
:summary: The next generation YAML parser and emitter for Python 
:url: https://pyyaml.org/ 
:description: |
  PyYAML is a full-featured YAML framework for the Python programming language.
:group: Languages
:changelog: |
  * Fri Jul 27 2018 - Ruan G. Ellis <ruan.ellis@alces-software.com>
    - First created
:src: 3.13.tar.gz  
:src_dir: pyyaml-3.13 
:type: apps
:version: '3.13'
:compilers:
  noarch:
:variants:
  default:
    :description: "Builds for Python 2.7.x series"
    :python_bin: python
    :python_libdir: python2.7
    :requirements:
      :build:
        - apps/python ~> 2.7.0
      :runtime:
        - apps/python ~> 2.7.0
  python3:
    :description: "Builds for Python 3.3.x series"
    :python_bin: python3
    :python_libdir: python3.3
    :requirements:
      :build:
        - apps/python3 ~> 3.3.0
      :runtime:
        - apps/python3 ~> 3.3.0
  python34:
    :description: "Builds for Python 3.4.x series"
    :python_bin: python3
    :python_libdir: python3.4
    :requirements:
      :build:
        - apps/python3 ~> 3.4.0
      :runtime:
        - apps/python3 ~> 3.4.0
:compile: |
  #noop
:install: |
  #  export PYTHONDONTWRITEBYTECODE=true
  PYTHONPATH=<%= dest_dir %>/python/lib/<%= variant[:python_libdir ] %>/site-packages:$PYTHONPATH
  mkdir -p <%= dest_dir %>/python/lib/<%= variant[:python_libdir ] %>/site-packages
  <%= variant[:python_bin] %> setup.py --without-libyaml install --prefix <%= dest_dir %>/python <%= redirect(:install) %>
  #  mv <%= dest_dir %>/python/bin <%= dest_dir %>/bin
:module: |
  setenv ${appcaps}DIR ${appdir}
  setenv ${appcaps}BIN ${appdir}/bin
  setenv ${appcaps}PYTHON ${appdir}/python

  prepend-path PATH ${appdir}/bin
  prepend-path PYTHONPATH ${appdir}/python/lib/<%= variant[:python_libdir] %>/site-packages
