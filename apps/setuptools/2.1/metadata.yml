---
:schema: 1
:title: setuptools
:license: PSF or ZPL
:summary: Download, build, install, upgrade and uninstall Python packages -- easily!
:url: http://pypi.python.org/pypi/setuptools
:description: |
  Package management for Python packages.
:type: apps
:group: Tools
:changelog: |
  * Thu Jan 16 2014 - James Donohue <james.donohue@alces-software.com>
    - Bumped to v2.1 and added python3 variant
  * Fri Sep 28 2012 Mark J. Titorenko <mark.titorenko@alces-software.com>
    - First created
:src: setuptools-2.1.tar.gz
:version: '2.1'
:compilers:
  noarch:
:variants:
  default:
    :description: "Builds for Python 2.7.x series"
    :requirements:
      :build: apps/python ~> 2.7.0
      :runtime: apps/python ~> 2.7.0  
  python3:
    :description: "Builds for Python 3.3.x series"
    :requirements:
      :build: apps/python3 ~> 3.3.0
      :runtime: apps/python3 ~> 3.3.0
:compile: |
  # no-op; this is a distribution of a Python application
  <% if variant_name == 'python3' %>python3 <% else %>python <% end %>setup.py build <%= redirect(:build) %>
:install: |
  <% if variant_name == 'python3' %>
  mkdir -p <%= dest_dir %>/python/lib/python3.3/site-packages
  export PYTHONPATH="$PYTHONPATH:<%= dest_dir %>/python/lib/python3.3/site-packages"
  python3 setup.py install --prefix=<%= dest_dir %>/python
  <% else %>
  mkdir -p <%= dest_dir %>/python/lib/python2.7/site-packages
  export PYTHONPATH="$PYTHONPATH:<%= dest_dir %>/python/lib/python2.7/site-packages"
  python setup.py install --prefix=<%= dest_dir %>/python
  <% end %>
  mv <%= dest_dir %>/python/bin <%= dest_dir %>/bin
:module: |
  setenv ${appcaps}DIR ${appdir}
  setenv ${appcaps}BIN ${appdir}/bin

  prepend-path PATH ${appdir}/bin

  <% if variant_name == 'default' %>
  prepend-path PYTHONPATH ${appdir}/python/lib/python2.7/site-packages
  <% elsif variant_name == 'python3' %>
  prepend-path PYTHONPATH ${appdir}/python/lib/python3.3/site-packages
  <% end %>
